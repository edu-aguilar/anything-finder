
<link rel="import" href="./bower_components/polymer/polymer-element.html">
<link rel="import" href="./bower_components/shadycss/apply-shim.html">

<dom-module id="swc-button">
  <template>
    <style>

      :host {
        display: block;
        width: 100%;
        height: 100%;
        cursor: not-allowed;
        --main-color: var(--swc-button-main-color, #ff1727);
        --disabled-color: var(--swc-button-disabled-color, #e9e9e9);
        --active-color: var(--swc-button-active-color, #ff8c94);
        @apply --swc-button;
      }

      button:focus {
        box-shadow: none;
        outline: 0 none;
        box-sizing: border-box;
        @apply --swc-button-button-focus;
      }

      button[disabled] {
        background-color: var(--disabled-color);
        border-color: var(--disabled-color);
        color: #bdbdbd;
        pointer-events: none;
        @apply --swc-button-button-disabled;
      }

      button:active {
        background-color: var(--active-color);
        border-color: var(--active-color);
        @apply --swc-button-button-active;
      }

      button {
        width: 100%;
        height: 100%;
        background-color: var(--main-color);
        border-color: var(--main-color);
        color: white;
        border-radius: 2px;
        font-size: 1em;
        box-shadow: 0px 2px 4px 0px rgba(196,196,196,1);
        @apply --swc-button-button-default;
      }
      
      button:hover {
        cursor: pointer;
        @apply --swc-button-button-hober;
      }

      iron-icon{
        @apply --swc-button-iron-icon;
      }

      :host([button-style="filled"]) button[disabled] {
        background-color: var(--disabled-color);
        border-color: var(--disabled-color);
        color: #bdbdbd;
        @apply --swc-button-button-style-filled-disabled;
      }

      :host([button-style="filled"]) button:active {
        background-color: var(--active-color);
        border-color: var(--active-color);
        @apply --swc-button-button-style-filled-active;
      }

      :host([button-style="filled"]) button {
        background-color: var(--main-color);
        border-color: var(--main-color);
        color: white;
        @apply --swc-button-button-style-filled-default;
      }

      :host([button-style="outlined"]) button[disabled] {
        background-color: var(--disabled-color);
        border-color: var(--disabled-color);
        color: #bdbdbd;
        @apply --swc-button-button-style-outlined-disabled;
      }

      :host([button-style="outlined"]) button:active {
        background-color: #f4f4f4;
        border-color: #f4f4f4;
        @apply --swc-button-button-style-outlined-active;
      }
      
      :host([button-style="outlined"]) button {
        color: var(--main-color);
        background-color: white;
        @apply --swc-button-button-style-outlined-default;
      }
      
      :host([button-style="icon"][button-type="icon"]) button[disabled] {
        color: #bdbdbd;
        @apply --swc-button-button-type-icon-disabled;
      }

      :host([button-style="icon"][button-type="icon"]) button:active {
        color: var(--active-color);
        @apply --swc-button-button-type-icon-active;
      }
      
      :host([button-style="icon"][button-type="icon"]) button {
        color: var(--main-color);
        background-color: transparent;
        border-color: transparent;
        box-shadow: none;
        border: none;
        @apply --swc-button-button-type-icon-default;
      }
      
      :host([button-type="all"]) button {
        display: flex;
        justify-content: center;
        align-items: center;
        @apply --swc-button-button-type-all-default;
      }

      :host([button-type="all"][align="right"]) button {
        flex-direction: row-reverse;
        @apply --swc-button-button-type-all-default-align-right;
      }

    </style>

    <button disabled$="[[disabled]]" on-click="_fireEvent">
      <template is="dom-if" if="[[iconName]]">
        <iron-icon icon=[[iconName]]></iron-icon>
      </template>
      <template is="dom-if" if="[[_hasLabel()]]">
        [[label]]
      </template>
    </button>

  </template>
  <script>
    /**
     * `swc-button` sets a button whose style is based on the "Sopra Steria Web Components" family.
     * This component is composed by a html button and a iron-icon.
     * The component is divided by three types of styles:
     *    - Filled: a generic style for label and icon and label only.
     *    - Outlined: a generic style for label and icon and label only.
     *    - Icon: the style for a button with an icon only.
     *
     * The component has three types of elements to display:
     *    - Label: label with filled or outlined style.
     *    - Icon: only icon with icon style.
     *    - All: icon + label with filled or outlined style.
     *
     * The button can be disabled and changed his default event name by a custom one.
     * In the button with label and icon you can choose the default order (icon first) or the opposite with align.
     * The default configuration of the component is a filled button with a label.
     *
     * Examples
     *
     * ```
     *      <!-- Default values will set to the component, except to the label -->
     *      <swc-button label="Button"></swc-button>
     *
     *      <!-- Custom values will set to the component, a label, a style, -->
     *      <!-- the elements of the button and a custom event -->
     *      <swc-button
     *          button-type="label"
     *          button-style="filled"
     *          event-name="eventTest"
     *          label="Label">
     *      </swc-button>
     *
     *      <!-- Custom values will set to the component, a label, a style, the elements -->
     *      <!-- of the button and the disabled property -->
     *      <swc-button
     *          button-type="label"
     *          button-style="outlined"
     *          disabled
     *          label="Label">
     *      </swc-button>
     *
     *      <swc-button
     *          button-type="icon"
     *          button-style="icon"
     *          disabled
     *          icon-name="icons:euro-symbol">
     *      </swc-button>
     *
     *      <!-- Custom values will set to the component, a label, an icon name, -->
     *      <!-- a style and the direction of align -->
     *      <swc-button
     *          button-type="all"
     *          button-style="outlined"
     *          label="Label"
     *          align="right"
     *          icon-name="menu">
     *      </swc-button>
     * ```
     *
     * ### Styling
     *
     * `swc-button` provides the following mixins for styling:
     *
     * Custom property | Description | Default
     * ----------------|-------------|----------
     * `--swc-button`| Mixin applied to the component itself | `{}`
     * `--swc-button-button-default`| Mixin applied to the button in repose by default | `{}`
     * `--swc-button-button-active`| Mixin applied to the button in active by default | `{}`
     * `--swc-button-button-disabled`| Mixin applied to the button in disabled state by default | `{}`
     * `--swc-button-button-focus`| Mixin applied to the button in focus by default | `{}`
     * `--swc-button-iron-icon`| Mixin applied to the icon inside de button | `{}`
     * `--swc-button-button-style-filled-default`| Mixin applied to the filled button in repose | `{}`
     * `--swc-button-button-style-filled-active`| Mixin applied to the filled button in active | `{}`
     * `--swc-button-button-style-filled-disabled`| Mixin applied to the filled button in disabled state | `{}`
     * `--swc-button-button-style-outlined-default`| Mixin applied to the outlined button in repose  | `{}`
     * `--swc-button-button-style-outlined-active`| Mixin applied to the outlined button in active | `{}`
     * `--swc-button-button-style-outlined-disabled`| Mixin applied to the outlined button in disabled state | `{}`
     * `--swc-button-button-type-icon-default`| Mixin applied to the icon button in repose | `{}`
     * `--swc-button-button-type-icon-active`| Mixin applied to the icon button in active | `{}`
     * `--swc-button-button-type-icon-disabled`| Mixin applied to the icon button in disabled state | `{}`
     * `--swc-button-button-type-all-default`| Mixin applied to the button with label and icon in repose by default | `{}`
     * `--swc-button-button-type-all-default-align-right`| Mixin applied to the button with label and icon in repose with align to right | `{}`
     *
     * @group Sopra Steria web components family
     * @element swc-button
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class SwcButton extends (class extends Polymer.Element {}) {
      static get is() { return 'swc-button'; }
      static get properties() {
        return {
          /**
           * The text to put in the button.
           */
          label: {
            type: String,
            value: 'Label'
          },
          /**
           * The disable property to set.
           */
          disabled: {
            type: Boolean,
            value: false
          },
          /**
           * The type of button to put in the button (label, icon, all).
           */
          buttonType: {
            type: String,
            value: 'label'
          },
          /**
           * The style predefined to set (filled, outlined, icon).
           */
          buttonStyle: {
            type: String,
            value: 'filled'
          },
          /**
           * The name of icon to set.
           */
          iconName: {
            type: String,
            value: null
          },
          /**
           * The position of the icon with icon and label button (left, right).
           */
          align: {
            type: String,
            value: 'left'
          },
          /**
           * The name of the custom event to set.
           */
          eventName: {
            type: String,
            value: 'clicked'
          }

        };
      }

      /**
       * Fired when swc-button is clicked.
       *
       * @event clicked or eventName
       */
      _fireEvent() {
        let buttonClickedEvent = new CustomEvent(this.eventName, {
          bubbles: true,
          composed: true
        });
        this.dispatchEvent(buttonClickedEvent);
      }

      /**
       * Indicates if the component has a label or label+icon
       *
       * @return {boolean} if the component doesn't have an icon
       */
       _hasLabel() {
        return this.buttonType != 'icon';
      }
    }

    window.customElements.define(SwcButton.is, SwcButton);
  </script>
</dom-module>
